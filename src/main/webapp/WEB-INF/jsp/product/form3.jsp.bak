<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>새 상품 등록 관리</title>
<style>
  #button{
  margin-left: 100px;
  }
  #button2{
  margin-left: 130px;
  }
</style>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>
<body>
<form action='add' method='post' enctype='multipart/form-data'>
  <div id="mainFont">
  <h1>새 상품 등록 관리</h1>
  </div>
  <h3>1. 상품 등록 및 진열 재고 관리</h3>
  <h3>상품 카테고리 대분류 선택
  <select id="Aselect" >
          <option  value="clean">청소</option>
          <option  value="office">사무</option>
          <option  value="organic">유기농</option>
          <option  value="furniture">가구</option> 
          <option  value="upcycleing">업사이클링</option> 
  </select>
   </h3>
   <h3>상품 카테고리 소분류 선택 </h3>
    <div id="subselect">
  <select  name="groupNo">
          <option  value=1>세제류</option>
          <option  value=2>위생용품</option>
          <option  value=3>화장지</option>
          <option  value=4>티슈</option> 
  </select>
  </div>
  
  <h3>상품명<input type="text" name="productName" required></h3>
  <h3>판매자명<input type="text" name="memberNo" required></h3>
  <h3>유통기한<input type="text" name="expirationDate" required></h3>
  <h3>직접제작여부<input type="text" name="diy" required></h3>
  <h3>원산지<input type="text" name="origin" required></h3>
  <h3>판매가<input type="text" name="price" required></h3>
  <br>
  <br>
  <h3>2. 이미지 등록</h3>
  <h4>이미지<input type="button" id="btnAdd" value ="사진추가버튼추가"></h4>
  <table id="list">
  </table>
  <br>
  <br>
  <!-- <h3>3. 배송비 관리</h3>
  <h4>수량<input type="text"></h4>개 이상 무료배송
  <h4>가격<input type="text"></h4>원 이상 무료배송 -->
  <br>
  <br>
  <h3>3. 옵션 관리</h3>
  <h4>옵션 이름<input type="button" id ="optionN" value="옵션이름추가버튼"></h4>
  <table id="optionplus"></table>
  <br>
  <br>
  <h3>4. 상품 설명</h3>
  <textarea rows="5" cols="10" name="description" required>내용을 입력해주세요</textarea>
  
  <button id=button>등록하기</button>
  </form>
  <button id="button1">이거 누르면 홈으로 돌아감 </button>
</body>
<script >
var pcnt =0 ; 
$(function(){
  $("#btnAdd").click(function(){ 
    var html= '<tr><td><input type="checkbox" class="form-checkbox" name="sampleCheckbox" onclick="doOpenCheck(this);"/>'
     html += '<input type="hidden" name="mainPhoto" />'
     html += '<input type="file" id="photoPath'+pcnt+'" name="photoPath" required>'; 
     html += '<button type="button" class="btnDel">삭제</button>'
     html += '<img id="view_file'+pcnt+'" src="#" width="400px" height="200px"/>'
     html += '</td></tr>';
     
     $("#list").append(html); 
     pcnt++;
  });
  
  $("#list").on("click", ".btnDel", function() { 
    $(this).parent().parent().remove(); 
    pcnt--;
  });  

})
</script>
<script >
$(function(){
  $("#optionN").click(function(){ 
     
     var html = '<tr><td><input type="text" name="optionName" required>'; 
     html += '<button type="button" class="btnDel">삭제</button>'
     html += '</td></tr>';
     
     $("#optionplus").append(html); 
  });
  
  $("#optionplus").on("click", ".btnDel", function() { 
    $(this).parent().parent().remove(); 
  });  
 
    
})
</script>
<script>
if ($('input[name=sampleCheckbox]').is(":checked")) {
  $('input[name=mainPhoto]').val(1);
} else {
  $('input[name=mainPhoto]').val(0);
}
</script>
<script>
$('#Aselect').change(function() {
  var state = $('#Aselect option:selected').val();
  if ( state == 'clean' ) {
    $("#subselect").html("<select  name='groupNo'><option value=1>세제류</option><option value=2>위생용품</option><option value=3>화장지</option><option value=4>티슈</option></select>");
  } else if ( state == 'office'){
    $("#subselect").html("<select name='groupNo'><option value=5>복사용지</option><option value=6>화일</option><option value=7>토너</option><option value=8>기타</option></select>");
  } else if(state == 'organic'){
    $("#subselect").html("<select name='groupNo'><option value=9>과일</option><option value=10>채소</option><option value=11>간식</option><option value=12>축산품</option></select>");
  } else if(state == 'furniture'){
    $("#subselect").html("<select name='groupNo'><option value=13>침대</option><option value=14>소파</option><option value=15>테이블</option><option value=16>의자</option><option value=17>파티션</option></select>");
  }else{
    $("#subselect").html("<h2>업사이클링은 소분류가없습니다.</h2><input type='hidden' name='groupNo' value=18>")
  }
});
</script>
    <script>
    $('.form-checkbox').bind('click', function() {
      $('.form-checkbox').not(this).attr('checked', false);
  });
    </script>
    <script>
    function doOpenCheck(chk){
      var obj = document.getElementsByName("sampleCheckbox");
      for(var i=0; i<obj.length; i++){
      if(obj[i] != chk){
      obj[i].checked = false;
      }
      }
      }
    </script>
    <script>
    var scount = 0; 
    if(scount <= pcnt){
    $(document).on("change",("#photoPath"+scount+""),function() {
       var input = document.getElementById("photoPath"+scount+"");
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('#view_file'+scount+'').attr('src', e.target.result);
                }
            reader.readAsDataURL(input.files[0]);
        }
        var dp = document.getElementById("view_file"+scount+"");
        dp.style.display = "block";
    scount++;
    });
    }else{
      console.log("어떻게?")
      
    }
    console.log(pcnt);
  </script>
    
    
    
    
    
</html>
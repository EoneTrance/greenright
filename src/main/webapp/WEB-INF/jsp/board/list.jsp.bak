<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
  <title>사진 게시물 목록</title>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css' integrity='sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T' crossorigin='anonymous'>
  <link rel='stylesheet' href='/css/common.css'>
</head>
<body>

<jsp:include page="../header.jsp"/>

<div id='content'>


<h1>게시판</h1>
 
<a href='form'>새 사진게시물</a> 
<div id ="np"style=float:right;>새글개수[개]</div>
<br>

<table class='table table-hover'>
<tr>
  <th>번호</th>
  <th>제목</th>
  <th>글쓴이</th>
  <th>등록일</th>
  <th>조회수</th>
  

</tr>
<c:forEach items="${boards}" var="board" >
  <tr class="tr1">
    <td>${board.no}</td>
    <td><a href='detail?no=${board.no}'>${board.title}</a></td>
    <td>${board.member.name}</td>
    <td class="cdate">${board.createdDate}</td>
    <td>${board.viewCount}</td>
  </tr>
</c:forEach> 
</table>
</div>
<select id ="Aselect" name="Aselect">
<option value ="Aoption1">제목</option>
<option value ="Aoption2">내용</option>
<option value ="Aoption3">글쓴이</option>
</select>
<div id="forsel">
</div>
<script>

$('#Aselect').change(function() {
  var state = jQuery('#Aselect option:selected').val();
  if ( state == 'Aoption1' ) {
    $("#forsel").html("<form action='search1'><input type='text' name='title'><button>검색</button></form>");
  } else if ( state == 'Aoption2'){
    $("#forsel").html("<form action='search2'><input type='text' name='contents'><button>검색</button></form>");
  } else {
    $("#forsel").html("<form action='search3'><input type='text' name='name'><button>검색</button></form>");
  }
});

</script>
    <script>
    var textareaVal = $(".cdate").text();
    var arr = new Array();
    var count = 0; 
    var dt = new Date();
    var day = dt.getDate();
    var month = (dt.getMonth()+1);
    
    var year = dt.getFullYear();
    if (month < 10) {
      month ="0" + month;
    }
    if (day < 10) {
      day ="0" + day;
    }
    console.log(day)
    console.log(year)
    console.log((month))
    for(var i =0; i<(textareaVal.length/10)+1; i++){
      var tday =textareaVal.substring(8+(10*i),(10*(i+1)));
      console.log(tday)
      var tyear =textareaVal.substring((10*i),(4+(10*i)));
      console.log(tyear)
      var tmonth =textareaVal.substring((5+(10*i)),(7+(10*i)));
      console.log(tmonth)
      if(tday==day&&tyear==year&&tmonth==(month)){
      count++
     
    }
    }
    
    $("#np").text("새글[" + count +"/"+ ((textareaVal.length/10)) +"]");
    </script>
<jsp:include page="../footer.jsp"/>

</body></html>
